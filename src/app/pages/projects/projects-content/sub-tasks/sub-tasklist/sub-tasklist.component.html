<div style="margin-bottom: 15px; font-size: 15px;">
    <app-table-filter style="margin-bottom: 1em;" (toggleSideTab)="toggleSideTab($event)" [btntext]="'subtask'"
        (selectionChange)="onViewSelected($event)" [viewOptions]="viewOptions"></app-table-filter>
    <div class="theme-grid" style="padding-top: 1em;">
        <div class="tabulator-table-task"></div>
    </div>
</div>

<div class="filter-backdrop" *ngIf="isFilterOpen" (click)="toggleSideTab()"></div>

<div class="filter-drawer" [class.open]="isFilterOpen">

    <div class="drawer-header">
        <div class="header-content">
            <h1>{{ isEditMode ? 'Update Task' : 'Create New Task' }}</h1>
            <p>
                {{ isEditMode
                ? 'Modify task details, assignments, and deadlines'
                : 'Define the task scope, timeline, and assign team members' }}
            </p>
        </div>

        <button class="icon-btn close-btn" (click)="toggleSideTab()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
    <div class="drawer-content">
        <!-- Main Scrollable Content -->
        <div class="page-container sub-tasklist">
            <div class="form-container">
                <form>
                    <!-- Title -->
                    <div class="form-group">
                        <label class="label">Task Name</label>
                        <input type="text" class="input-control" value="Sub task for task 1"
                            placeholder="Enter task name...">
                    </div>

                    <!-- Meta Row 1 -->
                    <div class="row">
                        <div class="col form-group">
                            <label class="label">Priority</label>
                            <div class="select-wrapper">
                                <select class="input-control">
                                    <option value="High" selected>High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                        </div>
                        <div class="col form-group">
                            <label class="label">Status</label>
                            <div class="select-wrapper">
                                <select class="input-control">
                                    <option value="Open">Open</option>
                                    <option value="In-Progress" selected>In-Progress</option>
                                    <option value="Completed">Completed</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Meta Row 2: Dates -->
                    <div class="row">
                        <div class="col form-group">
                            <label class="label">Start Date</label>
                            <input type="date" class="input-control" value="2025-12-09">
                        </div>
                        <div class="col form-group">
                            <label class="label">End Date</label>
                            <input type="date" class="input-control" value="2025-12-10">
                        </div>
                    </div>

                    <!-- Meta Row 3: Hours -->
                    <div class="row">
                        <div class="col form-group">
                            <label class="label">Est. Hours</label>
                            <input type="time" class="input-control" value="16:00">
                        </div>
                        <div class="col form-group">
                            <label class="label">Worked Hours</label>
                            <input type="time" class="input-control" value="08:00">
                        </div>
                    </div>

                    <!-- Completion -->
                    <div class="form-group">
                        <label class="label">Progress</label>
                        <div class="completion-container">
                            <div class="completion-header">
                                <span style="font-size:0.9rem; color:#64748b;">Completed</span>
                                <span class="percent-text" id="progText">28%</span>
                            </div>

                            <input type="range" min="0" max="100" value="28"
                                oninput="document.getElementById('progText').innerText = this.value + '%'">

                            <div class="presets">
                                <button type="button" class="preset-btn" onclick="updateProgress(0)">0%</button>
                                <button type="button" class="preset-btn" onclick="updateProgress(25)">25%</button>
                                <button type="button" class="preset-btn" onclick="updateProgress(50)">50%</button>
                                <button type="button" class="preset-btn" onclick="updateProgress(75)">75%</button>
                                <button type="button" class="preset-btn" onclick="updateProgress(100)">100%</button>
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label class="label">Description</label>
                        <textarea class="input-control"
                            placeholder="Add detailed description here...">sub task for task 1</textarea>
                    </div>

                    <!-- Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel">Cancel</button>
                        <button type="button" class="btn btn-save">Save Changes</button>
                    </div>

                </form>

            </div>
        </div>
    </div>